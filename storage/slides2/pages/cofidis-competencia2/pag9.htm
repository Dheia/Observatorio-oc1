title = "Pag9"
url = "/cofidis/competencia2/pag9"
layout = "cofidis"
is_hidden = 0
==
<div class="avatar">
<img src="/storage/app/media/cofidis/competencia2/2.3 Foto.png"><span style="color: #FFFFFF">Anamiga</span>
</div>
<div class="chat">
	 	<ul>
	 	
	 	<li class="me">
        ¿Qué tal el entrenamiento de hoy?
      </li>
      
      <li class="you">
        No ha ido mal.
      </li>
	 	    
	 	
			<li class="you">
        Lo peor es hacer la dieta cuando como en el trabajo.
      </li>
      
      <li class="me">
      Yo me preparo el tupper por la noche y hasta me he creado una tabla con diferentes menús.
      </li>
      
      <li class="me">
      Venga, te la paso.
      </li>
      
      <li class="you">
      ¡Qué rápido!
      </li>
      
      <li class="you">
      Lo piensas y lo haces. Tú si que eres práctico.
      </li>
      
      <li class="me">
      Ya me conoces, el tiempo lo dedico a la solución y no al problema <img src="/storage/app/media/cofidis/competencia2/5.1 Guiño.png">
      </li>
      
      <li class="you">
        Ya, ya: don inquieto míster soluciones...<br>pásame la tabla, anda.
      </li>
			
		</ul>
		<div class="body">
    </div>
    <div class="bg-typed">
      <div class="typed"></div>
    </div>
	</div>
      <div class="row center fixed-bottom">
        <a href="pag3?finish=true" 
            id="download-button" 
            class="btn-large waves-effect waves-light orange">
            CONTINUAR
          </a>
      </div>
      <style>
.topbar {
  width: {{ 2*100/31 }}%;
}
</style>

<script>
$( document ).ready(function() {
    var strings = [];
      var elements = $(" .chat ul li");
      console.dir(elements)
      var i = 0;
      $("body").on('DOMSubtreeModified', ".chat .typed", function() {
        console.log($(this)[0].scrollHeight)
        $(this).scrollTop($(this)[0].scrollHeight);

      });
      function run(num) {
          if(elements[num] == undefined) return;
          if($(elements[num]).hasClass("me")) {
              var options = {
                  strings: [""],
                  typeSpeed: 40,
                  onComplete: function(self) { 
                      
                      $(".typed").html("");
                      $(".typed-cursor").remove();
                      if(strings[num]) {
                        $(".chat .body").append("<div class='me'><div>"+strings[num]+"</div></div>");
                        var $container = $('.chat .body'),
                        $scrollTo = $('.chat .body div').last();
  
                        $container.scrollTop(
                            $scrollTo.offset().top - $container.offset().top + $container.scrollTop()
                        );
                      }

                      if(i>num)
                          run(num+1)
                  }
              }
              setTimeout(function(){
                var typed = new Typed(".typed", options);
              }, 2000);
              
          } else {
              if(i>num)
                  setTimeout(function(){
                      $(".chat .body").append("<div class='you'><div>"+strings[num]+"</div></div>");
                      var $container = $('.chat .body'),
                      $scrollTo = $('.chat .body div').last();

                      $container.scrollTop(
                          $scrollTo.offset().top - $container.offset().top + $container.scrollTop()
                      );
                      run(num+1)
                  }, 2000);
                  
          }
          
      }

      $(".chat ul li").each(function(){
          strings[i] = $(this).html();
          i++;
      })
      
      run(0);
});
      
</script>